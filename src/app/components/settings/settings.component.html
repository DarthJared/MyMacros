<div id="background" (click)="closeModal()">
    <div id="foreground" (click)="doNothing($event)">
        <div class="modal-title">Settings</div>
        <div class="modal-content">
            <div id="settings-tabs-header">
                <div class="tab" [ngClass]="{ 'active-tab': activeTab == 'Defaults' }" (click)="setActiveTab('Defaults')">
                    Defaults
                </div>
                <div class="tab" [ngClass]="{ 'active-tab': activeTab == 'Macros' }" (click)="setActiveTab('Macros')">
                    Macros
                </div>
                <div class="tab" [ngClass]="{ 'active-tab': activeTab == 'Other' }" (click)="setActiveTab('Other')">
                    Other
                </div>
            </div>
            <div class="tab-content" *ngIf="activeTab == 'Defaults'">
                <table id="defaults-table">
                    <tr>
                        <th>Day</th>
                        <th *ngIf="macrosSelected.calories">Calories</th>
                        <th *ngIf="macrosSelected.carbs">Carbs</th>
                        <th *ngIf="macrosSelected.fat">Fat</th>
                        <th *ngIf="macrosSelected.protein">Protein</th>
                    </tr>
                    <tr>
                        <td class="weekday-label">Sunday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Sunday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Sunday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Sunday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Sunday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Monday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Monday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Monday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Monday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Monday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Tuesday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Tuesday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Tuesday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Tuesday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Tuesday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Wednesday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Wednesday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Wednesday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Wednesday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Wednesday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Thursday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Thursday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Thursday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Thursday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Thursday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Friday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Friday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Friday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Friday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Friday.protein">
                        </td>
                    </tr>
                    <tr>
                        <td class="weekday-label">Saturday</td>
                        <td class="goal-cell calories-cell" *ngIf="macrosSelected.calories">
                            <input type="number" class="calorie-input" [(ngModel)]="weekPlan.Saturday.calories">
                        </td>
                        <td class="goal-cell carbs-cell" *ngIf="macrosSelected.carbs">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Saturday.carbs">
                        </td>
                        <td class="goal-cell fat-cell" *ngIf="macrosSelected.fat">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Saturday.fat">
                        </td>
                        <td class="goal-cell protein-cell" *ngIf="macrosSelected.protein">
                            <input type="number" class="goal-input" [(ngModel)]="weekPlan.Saturday.protein">
                        </td>
                    </tr>
                </table>
                <div class="modal-actions">
                    <div class="action-button" (click)="saveGoals()">
                        <mat-icon
                            aria-hidden="false"
                            aria-label="update"
                            fontIcon="done"
                            id="confirm-button">
                        </mat-icon>
                    </div>
                    <div class="action-button" (click)="closeModal()">
                        <mat-icon
                            aria-hidden="false"
                            aria-label="cancel update"
                            fontIcon="close"
                            id="cancel-button">
                        </mat-icon>
                    </div>
                </div>
            </div>
            <div class="tab-content" *ngIf="activeTab == 'Macros'">
                <div id="macro-title">
                    Select Macros to Actively Track
                </div>
                <div id="macro-list">
                    <div class="macro-check-wrapper">
                        <input type="checkbox" id="calories-check" name="calories-check" [(ngModel)]="macrosSelected.calories">
                        <label for="calories-check" class="macro-check-label">Calories</label>
                    </div>
                    <div class="macro-check-wrapper">
                        <input type="checkbox" id="carbs-check" name="carbs-check" [(ngModel)]="macrosSelected.carbs">
                        <label for="carbs-check" class="macro-check-label">Carbs</label>
                    </div>
                    <div class="macro-check-wrapper">
                        <input type="checkbox" id="fat-check" name="fat-check" [(ngModel)]="macrosSelected.fat">
                        <label for="fat-check" class="macro-check-label">Fat</label>
                    </div>
                    <div class="macro-check-wrapper">
                        <input type="checkbox" id="protein-check" name="protein-check" [(ngModel)]="macrosSelected.protein">
                        <label for="protein-check" class="macro-check-label">Protein</label>
                    </div>
                </div>
                <div class="modal-actions">
                    <div class="action-button" (click)="saveMacros()">
                        <mat-icon
                            aria-hidden="false"
                            aria-label="update"
                            fontIcon="done"
                            id="confirm-button">
                        </mat-icon>
                    </div>
                    <div class="action-button" (click)="closeModal()">
                        <mat-icon
                            aria-hidden="false"
                            aria-label="cancel update"
                            fontIcon="close"
                            id="cancel-button">
                        </mat-icon>
                    </div>
                </div>
            </div>
            <div class="tab-content" *ngIf="activeTab == 'Other'">
                <div class="scrollable-content">
                    <div id="importer">
                        <label for="importer-input" id="importer-label">Import</label>
                        <select name="importer-input" id="importer-input" [(ngModel)]="importType" (change)="importToChanged($event)">
                            <option value="macros">macros</option>
                            <option value="goals">goals</option>
                            <option value="meals">meals</option>
                            <option value="weekGoals">weekGoals</option>
                            <option value="foods">foods</option>
                        </select>
                        <br>
                        <textarea id="importer-area" [(ngModel)]="importValue"></textarea>
                        <br>
                        <div class="action-button" id="import-button" (click)="importData()">
                            <mat-icon
                                aria-hidden="false"
                                aria-label="update"
                                fontIcon="done"
                                id="confirm-button">
                            </mat-icon>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <div class="action-button" (click)="closeModal()">
                      <mat-icon
                        aria-hidden="false"
                        aria-label="cancel update"
                        fontIcon="close"
                        id="cancel-button">
                      </mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
